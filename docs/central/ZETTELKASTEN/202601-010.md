# 202601-010: Pipeline MD → PDF przez Pandoc + Typst

**confidence:** 0.95
**source:** implementation-2026-01-17, tested
**version:** 1
**deprecated:** false
**superseded_by:** []
**tags:** @narzędzia @pdf @typst @pandoc @automatyzacja @skill

## Fakt

Pipeline do automatycznej konwersji Markdown → profesjonalny PDF:

```
MD → [Pandoc] → .typ → [Typst + szablon] → PDF
```

### Narzędzia

| Narzędzie | Instalacja | Rozmiar | Rola |
|-----------|------------|---------|------|
| **Pandoc** | `winget install JohnMacFarlane.Pandoc` | ~100 MB | Konwerter MD → Typst |
| **Typst** | `winget install Typst.Typst` | ~15 MB | Silnik PDF |

### Komendy

**Szybka ścieżka (bez strony tytułowej):**
```bash
pandoc input.md -o TEMP/content.typ
typst compile TEMP/content.typ OUT/output.pdf
```

**Z szablonem Jarvis:**
```bash
pandoc input.md -o TEMP/content.typ
# Stwórz main.typ z importem szablonu
typst compile --root "C:/WORK/projects/_jarvis" main.typ output.pdf
```

### Szablon jarvis-pdf.typ

Lokalizacja: `modules/docs/templates/jarvis-pdf.typ`

| Cecha | Wartość |
|-------|---------|
| Format | A4 |
| Marginesy | 2 cm |
| Czcionka | Calibri 11pt (fallback: Arial) |
| Nagłówki | Numerowane (1.1, 1.2...) |
| Język | Polski |

**Funkcje pomocnicze:**
- `#warning(body)` — żółte pole ostrzeżenia
- `#info(body)` — niebieskie pole informacyjne
- `#success(body)` — zielone pole sukcesu

### Ścieżka do Typst (Windows, po winget)

```
C:/Users/[USER]/AppData/Local/Microsoft/WinGet/Packages/Typst.Typst_Microsoft.Winget.Source_8wekyb3d8bbwe/typst-x86_64-pc-windows-msvc/typst.exe
```

## Kontekst

**Problem:** Generowanie ładnych PDF-ów wymagało:
- Otwarcia Word
- Ręcznego formatowania
- Zapisania jako PDF

**Rozwiązanie:** Automatyczny pipeline uruchamiany przez Claude na trigger "PDF".

**Dlaczego Typst, nie LaTeX?**
- Instalacja: 15 MB vs 3 GB
- Kompilacja: milisekundy vs sekundy
- Składnia: prosta, czytelna
- Jakość: porównywalna typografia

## Integracja

### Trigger w CLAUDE.md

```markdown
| PDF, zrób PDF, eksport PDF | skills/jarvis-docs/skill.md | Użyj pandoc + Typst |
```

### Skill jarvis-docs

Sekcja "6. Generowanie PDF (Typst)" w `skills/jarvis-docs/skill.md`.

### Workflow Claude

1. Użytkownik: "zrób PDF z tego dokumentu"
2. Claude wykrywa trigger "PDF"
3. Claude czyta skill jarvis-docs
4. Claude wykonuje pipeline (pandoc → typst)
5. PDF zapisany w `OUT/YYYY-MM/`

## Powiązania

- → `skills/jarvis-docs/skill.md`: zawiera instrukcje obsługi
- → `modules/docs/templates/jarvis-pdf.typ`: szablon formatowania
- → `CLAUDE.md` sekcja 0.2: trigger PDF
- → 202601-008 (jeśli istnieje notatka o pandoc/dokumentach)

## Troubleshooting

| Problem | Przyczyna | Rozwiązanie |
|---------|-----------|-------------|
| "typst not found" | Terminal nie widzi | Restart terminala lub pełna ścieżka |
| "file not found" przy import | Brak --root | Dodaj `--root "SCIEZKA"` |
| Warning "unknown font" | Brak fontu | Ignoruj — fallback działa |
| Złe polskie znaki | Plik nie UTF-8 | Zapisz jako UTF-8 |

## Źródła

- Typst docs: https://typst.app/docs/
- Pandoc manual: https://pandoc.org/MANUAL.html
- Artykuł wdrożeniowy: `OUT/2026-01/2026-01-17_ARTICLE_Jarvis_PDF_Setup.pdf`

---

**Status:** Wdrożone i przetestowane. Działa.
